/**
 * @license
 * Copyright (c) 2015 Newgrounds Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */typeof Newgrounds>"u"&&(Newgrounds={});Newgrounds.io={GATEWAY_URI:"https://newgrounds.io/gateway_v3.php"};Newgrounds.io.events={};Newgrounds.io.call_validators={};Newgrounds.io.model={checkStrictValue:function(r,e,t,n,o,c,l){if(n=="mixed"||t===null||typeof t>"u"||n&&t.constructor===n||n==Boolean&&t.constructor===Number||o&&t.constructor===Newgrounds.io.model[o])return!0;if(t.constructor===Array&&(c||l)){for(var d=0;d<t.length;d++)this.checkStrictValue(r,e,t[d],c,l,null,null);return!0}if(r)throw new Error("Illegal '"+e+"' value set in model "+r);return!1}};Newgrounds.io.events.OutputEvent=function(r,e,t){this.type=r,this.call=e,this.data=t,this.success=t&&typeof(t.success!="undefined")?!!t.success:!1,this.preventDefault=!1};Newgrounds.io.events.OutputEvent.prototype.constructor=Newgrounds.io.events.OutputEvent;Newgrounds.io.events.SessionEvent=function(r){this.type=r,this.user=null,this.passport_url=null};Newgrounds.io.events.SessionEvent.USER_LOADED="user-loaded";Newgrounds.io.events.SessionEvent.SESSION_EXPIRED="session-expired";Newgrounds.io.events.SessionEvent.REQUEST_LOGIN="request-login";Newgrounds.io.events.SessionEvent.prototype.constructor=Newgrounds.io.events.SessionEvent;Newgrounds.io.events.EventDispatcher=function(){};Newgrounds.io.events.EventDispatcher.prototype={_event_listeners:{},addEventListener:function(r,e){if(r.constructor!==String)throw new Error("Event names must be a string format.");if(e.constructor!==Function)throw new Error("Event listeners must be functions.");typeof this._event_listeners[r]>"u"&&(this._event_listeners[r]=[]),this._event_listeners[r].push(e)},removeEventListener:function(r,e){if(!(typeof this._event_listeners[r]>"u")){var t=-1;for(i=0;i<this._event_listeners[r].length;i++)if(this._event_listeners[r][i]===e){t=i;break}return t>=0?(this._event_listeners[r].splice(t,1),!0):!1}},removeAllEventListeners:function(r){if(typeof this._event_listeners[r]>"u")return 0;var e=this._event_listeners[r].length;return this._event_listeners[r]=[],e},dispatchEvent:function(r){var e=!1,t;for(var n in Newgrounds.io.events)if(r.constructor===Newgrounds.io.events[n]){e=!0;break}if(!e)throw new Error("Unsupported event object");if(typeof this._event_listeners[r.type]>"u")return!1;for(var o=0;o<this._event_listeners[r.type].length;o++)if(t=this._event_listeners[r.type][o],t(r)===!1||r.preventDefault)return!0;return!0}};Newgrounds.io.events.EventDispatcher.prototype.constructor=Newgrounds.io.events.EventDispatcher;Newgrounds.io.core=function(r,e){var t,n,o,c=this,l,d=new Newgrounds.io.urlHelper;if(d.getRequestQueryParam("ngio_session_id")&&(n=d.getRequestQueryParam("ngio_session_id")),Object.defineProperty(this,"app_id",{get:function(){return t}}),Object.defineProperty(this,"user",{get:function(){return this.getCurrentUser()}}),Object.defineProperty(this,"session_id",{set:function(s){if(s&&typeof s!="string")throw new Error("'session_id' must be a string value.");n=s||null},get:function(){return n||null}}),Object.defineProperty(this,"debug",{set:function(s){o=!!s},get:function(){return o}}),!r)throw new Error("Missing required 'app_id' in Newgrounds.io.core constructor");if(typeof r!="string")throw new Error("'app_id' must be a string value in Newgrounds.io.core constructor");t=r,e?l=I.enc.Base64.parse(e):console.warn("You did not set an encryption key. Some calls may not work without this.");var S="Newgrounds-io-app_session-"+t.split(":").join("-");function p(){return typeof localStorage<"u"&&localStorage&&localStorage.getItem.constructor==Function?!0:(console.warn("localStorage unavailable. Are you running from a web server?"),!1)}function w(){if(!p())return null;var s=localStorage.getItem(S);return s||null}function v(s){if(!p())return null;localStorage.setItem(S,s)}function N(){if(!p())return null;localStorage.removeItem(S)}!n&&w()&&(n=w()),this.addEventListener("App.endSession",function(s){c.session_id=null,N()}),this.addEventListener("App.startSession",function(s){s.success&&(c.session_id=s.data.session.id)}),this.addEventListener("App.checkSession",function(s){s.success?s.data.session.expired?(N(),this.session_id=null):s.data.session.remember&&v(s.data.session.id):(this.session_id=null,N())}),this._encryptCall=function(s){if(!s||!s.constructor==Newgrounds.io.model.call_model)throw new Error("Attempted to encrypt a non 'call' object");var h=I.lib.WordArray.random(16),u=I.AES.encrypt(JSON.stringify(s.toObject()),l,{iv:h}),a=I.enc.Base64.stringify(h.concat(u.ciphertext));return s.secure=a,s.parameters=null,s}};Newgrounds.io.core.prototype={_session_loader:null,_call_queue:[],_event_listeners:{},addEventListener:Newgrounds.io.events.EventDispatcher.prototype.addEventListener,removeEventListener:Newgrounds.io.events.EventDispatcher.prototype.removeEventListener,removeAllEventListeners:Newgrounds.io.events.EventDispatcher.prototype.removeAllEventListeners,dispatchEvent:Newgrounds.io.events.EventDispatcher.prototype.dispatchEvent,getSessionLoader:function(){return this._session_loader==null&&(this._session_loader=new Newgrounds.io.SessionLoader(this)),this._session_loader},getSession:function(){return this.getSessionLoader().session},getCurrentUser:function(){var r=this.getSessionLoader();return r.session?r.session.user:null},getLoginError:function(){return this.getSessionLoader().last_error},getValidSession:function(r,e){this.getSessionLoader().getValidSession(r,e)},requestLogin:function(r,e,t,n){if(!r||r.constructor!==Function)throw"Missing required callback for 'on_logged_in'.";if(!e||e.constructor!==Function)throw"Missing required callback for 'on_login_failed'.";var o=this,c=this.getSessionLoader(),l;function d(){l&&clearInterval(l),o.removeEventListener("cancelLoginRequest",S),c.closePassport()}function S(){t&&t.constructor===Function?t.call(n):e.call(n),d()}o.addEventListener("cancelLoginRequest",S),o.getCurrentUser()?r.call(n):(c.loadPassport(),l=setInterval(function(){c.checkSession(function(p){!p||p.expired?c.last_error.code==111?S():(d(),e.call(n)):p.user&&(d(),r.call(n))})},3e3))},cancelLoginRequest:function(){event=new Newgrounds.io.events.OutputEvent("cancelLoginRequest",null,null),this.dispatchEvent(event)},logOut:function(r,e){this.getSessionLoader().endSession(r,e)},queueComponent:function(r,e,t,n){e&&e.constructor===Function&&!t&&(t=e,e=null);var o=new Newgrounds.io.model.call(this);o.component=r,typeof e<"u"&&(o.parameters=e),this._validateCall(o),this._call_queue.push([o,t,n])},executeQueue:function(){for(var r=[],e=[],t=[],n=0;n<this._call_queue.length;n++)r.push(this._call_queue[n][0]),e.push(this._call_queue[n][1]),t.push(this._call_queue[n][2]);this._doCall(r,e,t),this._call_queue=[]},callComponent:function(r,e,t,n){e.constructor===Function&&!t&&(t=e,e=null);var o=new Newgrounds.io.model.call(this);o.component=r,typeof e<"u"&&(o.parameters=e),this._validateCall(o),this._doCall(o,t,n)},_doCallback:function(r,e,t,n){var o,c,l,d={success:!1,error:{code:0,message:"Unexpected Server Response"}};if(typeof t>"u"&&(t=null),r.constructor===Array&&e&&e.constructor===Array){for(o=0;o<r.length;o++)c=!t||typeof t[o]>"u"?d:t[o],l=typeof e[o]>"u"?null:e[o],this._doCallback(r[o],l,c,n[o]);return}if(t&&typeof t.data<"u"){var S;if(t.data.constructor===Array)for(S=[],o=0;o<t.data.length;o++)S.push(this._formatResults(t.component,t.data[o]));else S=this._formatResults(t.component,t.data);t.data=S}var p;t?typeof t.data<"u"?p=t.data:(console.warn("Received empty data from '"+r.component+"'."),p=null):p=d;var w;if(p.constructor===Array)for(o=0;o<p.length;o++)w=new Newgrounds.io.events.OutputEvent(r.component,r[o],p[o]),this.dispatchEvent(w);else w=new Newgrounds.io.events.OutputEvent(r.component,r,p),this.dispatchEvent(w);e&&e.constructor===Function&&e.call(n,p)},_formatResults:function(r,e){var t,n,o,c,l,d=null;if(typeof e.success<"u"&&e.success&&(d=Newgrounds.io.call_validators.getValidator(r)),!d)return e;var S=d.returns;for(n in S){if(typeof e[n]>"u"&&e.success!==!1){console.warn("Newgrounds.io server failed to return expected '"+n+"' in '"+r+"' data.");continue}if(typeof S[n].array<"u"){if(typeof S[n].array.object<"u"?l=S[n].array.object:l=S[n].array,typeof Newgrounds.io.model[l]>"u"){console.warn("Received unsupported model '"+l+"' from '"+r+"'.");continue}if(e[n].constructor!==Array){console.warn("Expected array<"+l+"> value for '"+n+"' in '"+r+"' data, got "+typeof e[n]);continue}for(c=[],o=0;o<e[n].length;o++)t=new Newgrounds.io.model[l](this),t.fromObject(e[n][o]),c.push(t);e[n]=c}else if(typeof S[n].object<"u"&&e[n]){if(l=S[n].object,typeof Newgrounds.io.model[l]>"u"){console.warn("Received unsupported model '"+l+"' from '"+r+"'.");continue}t=new Newgrounds.io.model[l](this),t.fromObject(e[n]),e[n]=t}}return e},_doCall:function(r,e,t){if(!this.app_id)throw new Error("Attempted to call Newgrounds.io server without setting an app_id in Newgrounds.io.core instance.");var n,o=!1;function c(s){var h=Newgrounds.io.call_validators.getValidator(s.component);if(h.hasOwnProperty("redirect")&&h.redirect){var u=s.parameters;if(!u||!u.hasOwnProperty("redirect")||u.redirect)return!0}return!1}if(r.constructor===Array)for(n=[],i=0;i<r.length;i++){if(c(r[i]))throw new Error("Loader components can not be called in an array without a redirect=false parameter.");n.push(r[i].toObject())}else n=r.toObject(),o=c(r);var l={app_id:this.app_id,session_id:this.session_id,call:n};if(this.debug&&(l.debug=1),o){this.app_id,r.component;var d=document.createElement("form");d.action=Newgrounds.io.GATEWAY_URI,d.target="_blank",d.method="POST";var S=document.createElement("input");S.type="hidden",S.name="input",d.appendChild(S),document.body.appendChild(d),S.value=JSON.stringify(l),d.submit(),document.body.removeChild(d)}else{var p=new XMLHttpRequest,w=this;p.onreadystatechange=function(){if(p.readyState==4){var s;try{s=JSON.parse(p.responseText).result}catch{}w._doCallback(r,e,s,t)}};var v=new FormData,N=typeof Array.prototype.toJSON<"u"?Array.prototype.toJSON:null;N&&delete Array.prototype.toJSON,v.append("input",JSON.stringify(l)),N&&(Array.prototype.toJSON=N),p.open("POST",Newgrounds.io.GATEWAY_URI,!0),p.send(v)}},_doValidateCall:function(r,e){var t,n,o,c,l=Newgrounds.io.call_validators.getValidator(r);if(!l)throw new Error("'"+r+"' is not a valid server component.");if(l.require_session&&!this.session_id)throw new Error("'"+r+"' requires a session id");if(l.import&&l.import.length>0)for(t=0;t<l.import.length;t++)n=l.import[t].split("."),this._doValidateCall(n[0],n[1],e);var d;for(o in l.params){if(c=l.params[o],d=e&&typeof e[o]<"u"?e[o]:null,!d&&c.extract_from&&c.extract_from.alias&&(d=e[c.extract_from.alias]),d===null){if(c.required)throw new Error("Missing required parameter for '"+r+"': "+o);continue}if(c.extract_from&&d.constructor===Newgrounds.io.model[c.extract_from.object]&&(d=d[c.extract_from.property]),!Newgrounds.io.model.checkStrictValue(null,o,d,c.type,null,null,null))throw new Error("Illegal value for '"+o+"' parameter of '"+r+"': "+d)}},_validateCall:function(r){var e;if(r.constructor===Array){var t=[];for(e=0;e<r.length;e++)t.push(this._validateCall(r[e]));return t}else if(r.constructor!==Newgrounds.io.model.call)throw new Error("Unexpected 'call_model' value. Expected Newgrounds.io.model.call instance.");var n=r.component,o=r.parameters,c=r.echo;if(o&&o.constructor===Array)for(e=0;e<o.length;e++)this._doValidateCall(n,o[e]);else this._doValidateCall(n,o);var l={component:r.component},d=Newgrounds.io.call_validators.getValidator(r.component);if(typeof o<"u")if(d.secure){var S=this._encryptCall(r);l.secure=S.secure}else l.parameters=o;return typeof c<"u"&&(l.echo=c),l}};Newgrounds.io.core.prototype.constructor=Newgrounds.io.core;Newgrounds.io.core.instance_id=0;Newgrounds.io.core.getNextInstanceID=function(){return Newgrounds.io.core.instance_id++,Newgrounds.io.core.instance_id};Newgrounds.io.urlHelper=function(){var r=window.location.href,e={},t=r.split("?").pop();if(t)for(var n=t.split("&"),o,c=0;c<n.length;c++)o=n[c].split("="),e[o[0]]=o[1];this.getRequestQueryParam=function(l,d){return typeof d>"u"&&(d=null),typeof e[l]>"u"?d:e[l]}};Newgrounds.io.model.call=function(r,e){var t,n,o,c;this.__property_names=["component","echo","parameters","secure"],this.__classname="Newgrounds.io.model.call",this.__ngio=r;var t;Object.defineProperty(this,"component",{get:function(){return typeof t>"u"?null:t},set:function(l){Newgrounds.io.model.checkStrictValue(this.__classname,"component",l,String,null,null,null),t=l}});var n;Object.defineProperty(this,"echo",{get:function(){return typeof n>"u"?null:n},set:function(l){n=l}});var o;Object.defineProperty(this,"parameters",{get:function(){return typeof o>"u"?null:o},set:function(l){Newgrounds.io.model.checkStrictValue(this.__classname,"parameters",l,Object,null,Object,null),o=l}});var c;Object.defineProperty(this,"secure",{get:function(){return typeof c>"u"?null:c},set:function(l){Newgrounds.io.model.checkStrictValue(this.__classname,"secure",l,String,null,null,null),c=l}}),e&&this.fromObject(e)};Newgrounds.io.model.call.prototype._has_ngio_user=function(){return this.__ngio&&this.__ngio.user};Newgrounds.io.model.call.prototype.toObject=function(){for(var r={},e=0;e<this.__property_names.length;e++)typeof this[this.__property_names[e]]<"u"&&(r[this.__property_names[e]]=this[this.__property_names[e]]);return r};Newgrounds.io.model.call.prototype.fromObject=function(r){for(var e,t=0;t<this.__property_names.length;t++)e=r[this.__property_names[t]],this[this.__property_names[t]]=e};Newgrounds.io.model.call.prototype.constructor=Newgrounds.io.model.call;Newgrounds.io.model.debug=function(r,e){var t,n;this.__property_names=["exec_time","input"],this.__classname="Newgrounds.io.model.debug",this.__ngio=r;var t;Object.defineProperty(this,"exec_time",{get:function(){return typeof t>"u"?null:t},set:function(o){Newgrounds.io.model.checkStrictValue(this.__classname,"exec_time",o,String,null,null,null),t=o}});var n;Object.defineProperty(this,"input",{get:function(){return typeof n>"u"?null:n},set:function(o){Newgrounds.io.model.checkStrictValue(this.__classname,"input",o,null,"input",null,null),n=o}}),e&&this.fromObject(e)};Newgrounds.io.model.debug.prototype._has_ngio_user=function(){return this.__ngio&&this.__ngio.user};Newgrounds.io.model.debug.prototype.toObject=function(){for(var r={},e=0;e<this.__property_names.length;e++)typeof this[this.__property_names[e]]<"u"&&(r[this.__property_names[e]]=this[this.__property_names[e]]);return r};Newgrounds.io.model.debug.prototype.fromObject=function(r){for(var e,t=0;t<this.__property_names.length;t++)e=r[this.__property_names[t]],this.__property_names[t]=="input"&&e&&(e=new Newgrounds.io.model.input(this.__ngio,e)),this[this.__property_names[t]]=e};Newgrounds.io.model.debug.prototype.constructor=Newgrounds.io.model.debug;Newgrounds.io.model.error=function(r,e){var t,n;this.__property_names=["code","message"],this.__classname="Newgrounds.io.model.error",this.__ngio=r;var t;Object.defineProperty(this,"code",{get:function(){return typeof t>"u"?null:t},set:function(o){Newgrounds.io.model.checkStrictValue(this.__classname,"code",o,Number,null,null,null),t=o}});var n;Object.defineProperty(this,"message",{get:function(){return typeof n>"u"?null:n},set:function(o){Newgrounds.io.model.checkStrictValue(this.__classname,"message",o,String,null,null,null),n=o}}),e&&this.fromObject(e)};Newgrounds.io.model.error.prototype._has_ngio_user=function(){return this.__ngio&&this.__ngio.user};Newgrounds.io.model.error.prototype.toObject=function(){for(var r={},e=0;e<this.__property_names.length;e++)typeof this[this.__property_names[e]]<"u"&&(r[this.__property_names[e]]=this[this.__property_names[e]]);return r};Newgrounds.io.model.error.prototype.fromObject=function(r){for(var e,t=0;t<this.__property_names.length;t++)e=r[this.__property_names[t]],this[this.__property_names[t]]=e};Newgrounds.io.model.error.get=function(r,e){var t=new Newgrounds.io.model.error;return t.message=r||"Unknown Error",t.code=e||0,t};Newgrounds.io.model.error.MISSING_INPUT=100;Newgrounds.io.model.error.INVALID_INPUT=101;Newgrounds.io.model.error.MISSING_PARAMETER=102;Newgrounds.io.model.error.INVALID_PARAMETER=103;Newgrounds.io.model.error.EXPIRED_SESSION=104;Newgrounds.io.model.error.DUPLICATE_SESSION=105;Newgrounds.io.model.error.MAX_CONNECTIONS_EXCEEDED=106;Newgrounds.io.model.error.MAX_CALLS_EXCEEDED=107;Newgrounds.io.model.error.MEMORY_EXCEEDED=108;Newgrounds.io.model.error.TIMED_OUT=109;Newgrounds.io.model.error.LOGIN_REQUIRED=110;Newgrounds.io.model.error.INVALID_APP_ID=200;Newgrounds.io.model.error.INVALID_ENCRYPTION=201;Newgrounds.io.model.error.INVALID_MEDAL_ID=202;Newgrounds.io.model.error.INVALID_SCOREBOARD_ID=203;Newgrounds.io.model.error.INVALID_SAVEGROUP_ID=204;Newgrounds.io.model.error.SERVER_UNAVAILABLE=504;Newgrounds.io.model.error.prototype.constructor=Newgrounds.io.model.error;Newgrounds.io.model.input=function(r,e){var t,n,o,c,l;this.__property_names=["app_id","call","debug","echo","session_id"],this.__classname="Newgrounds.io.model.input",this.__ngio=r;var t;Object.defineProperty(this,"app_id",{get:function(){return typeof t>"u"?null:t},set:function(d){Newgrounds.io.model.checkStrictValue(this.__classname,"app_id",d,String,null,null,null),t=d}});var n;Object.defineProperty(this,"call",{get:function(){return typeof n>"u"?null:n},set:function(d){Newgrounds.io.model.checkStrictValue(this.__classname,"call",d,null,"call",null,"call"),n=d}});var o;Object.defineProperty(this,"debug",{get:function(){return typeof o>"u"?null:o},set:function(d){Newgrounds.io.model.checkStrictValue(this.__classname,"debug",d,Boolean,null,null,null),o=d}});var c;Object.defineProperty(this,"echo",{get:function(){return typeof c>"u"?null:c},set:function(d){c=d}});var l;Object.defineProperty(this,"session_id",{get:function(){return typeof l>"u"?null:l},set:function(d){Newgrounds.io.model.checkStrictValue(this.__classname,"session_id",d,String,null,null,null),l=d}}),e&&this.fromObject(e)};Newgrounds.io.model.input.prototype._has_ngio_user=function(){return this.__ngio&&this.__ngio.user};Newgrounds.io.model.input.prototype.toObject=function(){for(var r={},e=0;e<this.__property_names.length;e++)typeof this[this.__property_names[e]]<"u"&&(r[this.__property_names[e]]=this[this.__property_names[e]]);return r};Newgrounds.io.model.input.prototype.fromObject=function(r){for(var e,t=0;t<this.__property_names.length;t++)e=r[this.__property_names[t]],this.__property_names[t]=="call"&&e&&(e=new Newgrounds.io.model.call(this.__ngio,e)),this[this.__property_names[t]]=e};Newgrounds.io.model.input.prototype.constructor=Newgrounds.io.model.input;Newgrounds.io.model.medal=function(r,e){var t,n,o,c,l,d,S,p;this.__property_names=["description","difficulty","icon","id","name","secret","unlocked","value"],this.__classname="Newgrounds.io.model.medal",this.__ngio=r;var t;Object.defineProperty(this,"description",{get:function(){return typeof t>"u"?null:t},set:function(w){Newgrounds.io.model.checkStrictValue(this.__classname,"description",w,String,null,null,null),t=w}});var n;Object.defineProperty(this,"difficulty",{get:function(){return typeof n>"u"?null:n},set:function(w){Newgrounds.io.model.checkStrictValue(this.__classname,"difficulty",w,Number,null,null,null),n=w}});var o;Object.defineProperty(this,"icon",{get:function(){return typeof o>"u"?null:o},set:function(w){Newgrounds.io.model.checkStrictValue(this.__classname,"icon",w,String,null,null,null),o=w}});var c;Object.defineProperty(this,"id",{get:function(){return typeof c>"u"?null:c},set:function(w){Newgrounds.io.model.checkStrictValue(this.__classname,"id",w,Number,null,null,null),c=w}});var l;Object.defineProperty(this,"name",{get:function(){return typeof l>"u"?null:l},set:function(w){Newgrounds.io.model.checkStrictValue(this.__classname,"name",w,String,null,null,null),l=w}});var d;Object.defineProperty(this,"secret",{get:function(){return typeof d>"u"?null:d},set:function(w){Newgrounds.io.model.checkStrictValue(this.__classname,"secret",w,Boolean,null,null,null),d=w}});var S;Object.defineProperty(this,"unlocked",{get:function(){return typeof S>"u"?null:S},set:function(w){Newgrounds.io.model.checkStrictValue(this.__classname,"unlocked",w,Boolean,null,null,null),S=w}});var p;Object.defineProperty(this,"value",{get:function(){return typeof p>"u"?null:p},set:function(w){Newgrounds.io.model.checkStrictValue(this.__classname,"value",w,Number,null,null,null),p=w}}),e&&this.fromObject(e)};Newgrounds.io.model.medal.prototype._has_ngio_user=function(){return this.__ngio&&this.__ngio.user};Newgrounds.io.model.medal.prototype.toObject=function(){for(var r={},e=0;e<this.__property_names.length;e++)typeof this[this.__property_names[e]]<"u"&&(r[this.__property_names[e]]=this[this.__property_names[e]]);return r};Newgrounds.io.model.medal.prototype.fromObject=function(r){for(var e,t=0;t<this.__property_names.length;t++)e=r[this.__property_names[t]],this[this.__property_names[t]]=e};Newgrounds.io.model.medal.prototype.unlock=function(r){if(this._has_ngio_user())this.__ngio.callComponent("Medal.unlock",{id:this.id},function(n){n.success&&(this.unlocked=!0),r(n)});else if(typeof r=="function"){var e=Newgrounds.io.model.error.get("This function requires a valid user session.",Newgrounds.io.model.error.LOGIN_REQUIRED),t={success:!1,error:e};r(t)}};Newgrounds.io.model.medal.prototype.constructor=Newgrounds.io.model.medal;Newgrounds.io.model.output=function(r,e){var t,n,o,c,l,d,S,p;this.__property_names=["api_version","app_id","debug","echo","error","help_url","result","success"],this.__classname="Newgrounds.io.model.output",this.__ngio=r;var t;Object.defineProperty(this,"api_version",{get:function(){return typeof t>"u"?null:t},set:function(w){Newgrounds.io.model.checkStrictValue(this.__classname,"api_version",w,String,null,null,null),t=w}});var n;Object.defineProperty(this,"app_id",{get:function(){return typeof n>"u"?null:n},set:function(w){Newgrounds.io.model.checkStrictValue(this.__classname,"app_id",w,String,null,null,null),n=w}});var o;Object.defineProperty(this,"debug",{get:function(){return typeof o>"u"?null:o},set:function(w){Newgrounds.io.model.checkStrictValue(this.__classname,"debug",w,null,"debug",null,null),o=w}});var c;Object.defineProperty(this,"echo",{get:function(){return typeof c>"u"?null:c},set:function(w){c=w}});var l;Object.defineProperty(this,"error",{get:function(){return typeof l>"u"?null:l},set:function(w){Newgrounds.io.model.checkStrictValue(this.__classname,"error",w,null,"error",null,null),l=w}});var d;Object.defineProperty(this,"help_url",{get:function(){return typeof d>"u"?null:d},set:function(w){Newgrounds.io.model.checkStrictValue(this.__classname,"help_url",w,String,null,null,null),d=w}});var S;Object.defineProperty(this,"result",{get:function(){return typeof S>"u"?null:S},set:function(w){Newgrounds.io.model.checkStrictValue(this.__classname,"result",w,null,"result",null,"result"),S=w}});var p;Object.defineProperty(this,"success",{get:function(){return typeof p>"u"?null:p},set:function(w){Newgrounds.io.model.checkStrictValue(this.__classname,"success",w,Boolean,null,null,null),p=w}}),e&&this.fromObject(e)};Newgrounds.io.model.output.prototype._has_ngio_user=function(){return this.__ngio&&this.__ngio.user};Newgrounds.io.model.output.prototype.toObject=function(){for(var r={},e=0;e<this.__property_names.length;e++)typeof this[this.__property_names[e]]<"u"&&(r[this.__property_names[e]]=this[this.__property_names[e]]);return r};Newgrounds.io.model.output.prototype.fromObject=function(r){for(var e,t=0;t<this.__property_names.length;t++)e=r[this.__property_names[t]],this.__property_names[t]=="debug"&&e?e=new Newgrounds.io.model.debug(this.__ngio,e):this.__property_names[t]=="error"&&e?e=new Newgrounds.io.model.error(this.__ngio,e):this.__property_names[t]=="result"&&e&&(e=new Newgrounds.io.model.result(this.__ngio,e)),this[this.__property_names[t]]=e};Newgrounds.io.model.output.prototype.constructor=Newgrounds.io.model.output;Newgrounds.io.model.result=function(r,e){var t,n,o;this.__property_names=["component","data","echo"],this.__classname="Newgrounds.io.model.result",this.__ngio=r;var t;Object.defineProperty(this,"component",{get:function(){return typeof t>"u"?null:t},set:function(c){Newgrounds.io.model.checkStrictValue(this.__classname,"component",c,String,null,null,null),t=c}});var n;Object.defineProperty(this,"data",{get:function(){return typeof n>"u"?null:n},set:function(c){Newgrounds.io.model.checkStrictValue(this.__classname,"data",c,Object,null,Object,null),n=c}});var o;Object.defineProperty(this,"echo",{get:function(){return typeof o>"u"?null:o},set:function(c){o=c}}),e&&this.fromObject(e)};Newgrounds.io.model.result.prototype._has_ngio_user=function(){return this.__ngio&&this.__ngio.user};Newgrounds.io.model.result.prototype.toObject=function(){for(var r={},e=0;e<this.__property_names.length;e++)typeof this[this.__property_names[e]]<"u"&&(r[this.__property_names[e]]=this[this.__property_names[e]]);return r};Newgrounds.io.model.result.prototype.fromObject=function(r){for(var e,t=0;t<this.__property_names.length;t++)e=r[this.__property_names[t]],this[this.__property_names[t]]=e};Newgrounds.io.model.result.prototype.constructor=Newgrounds.io.model.result;Newgrounds.io.model.saveslot=function(r,e){var t,n,o,c,l;this.__property_names=["datetime","id","size","timestamp","url"],this.__classname="Newgrounds.io.model.saveslot",this.__ngio=r;var t;Object.defineProperty(this,"datetime",{get:function(){return typeof t>"u"?null:t},set:function(d){Newgrounds.io.model.checkStrictValue(this.__classname,"datetime",d,String,null,null,null),t=d}});var n;Object.defineProperty(this,"id",{get:function(){return typeof n>"u"?null:n},set:function(d){Newgrounds.io.model.checkStrictValue(this.__classname,"id",d,Number,null,null,null),n=d}});var o;Object.defineProperty(this,"size",{get:function(){return typeof o>"u"?null:o},set:function(d){Newgrounds.io.model.checkStrictValue(this.__classname,"size",d,Number,null,null,null),o=d}});var c;Object.defineProperty(this,"timestamp",{get:function(){return typeof c>"u"?null:c},set:function(d){Newgrounds.io.model.checkStrictValue(this.__classname,"timestamp",d,Number,null,null,null),c=d}});var l;Object.defineProperty(this,"url",{get:function(){return typeof l>"u"?null:l},set:function(d){Newgrounds.io.model.checkStrictValue(this.__classname,"url",d,String,null,null,null),l=d}}),e&&this.fromObject(e)};Newgrounds.io.model.saveslot.prototype._has_ngio_user=function(){return this.__ngio&&this.__ngio.user};Newgrounds.io.model.saveslot.prototype.toObject=function(){for(var r={},e=0;e<this.__property_names.length;e++)typeof this[this.__property_names[e]]<"u"&&(r[this.__property_names[e]]=this[this.__property_names[e]]);return r};Newgrounds.io.model.saveslot.prototype.fromObject=function(r){for(var e,t=0;t<this.__property_names.length;t++)e=r[this.__property_names[t]],this[this.__property_names[t]]=e};Newgrounds.io.model.saveslot.prototype.constructor=Newgrounds.io.model.saveslot;Newgrounds.io.model.score=function(r,e){var t,n,o,c;this.__property_names=["formatted_value","tag","user","value"],this.__classname="Newgrounds.io.model.score",this.__ngio=r;var t;Object.defineProperty(this,"formatted_value",{get:function(){return typeof t>"u"?null:t},set:function(l){Newgrounds.io.model.checkStrictValue(this.__classname,"formatted_value",l,String,null,null,null),t=l}});var n;Object.defineProperty(this,"tag",{get:function(){return typeof n>"u"?null:n},set:function(l){Newgrounds.io.model.checkStrictValue(this.__classname,"tag",l,String,null,null,null),n=l}});var o;Object.defineProperty(this,"user",{get:function(){return typeof o>"u"?null:o},set:function(l){Newgrounds.io.model.checkStrictValue(this.__classname,"user",l,null,"user",null,null),o=l}});var c;Object.defineProperty(this,"value",{get:function(){return typeof c>"u"?null:c},set:function(l){Newgrounds.io.model.checkStrictValue(this.__classname,"value",l,Number,null,null,null),c=l}}),e&&this.fromObject(e)};Newgrounds.io.model.score.prototype._has_ngio_user=function(){return this.__ngio&&this.__ngio.user};Newgrounds.io.model.score.prototype.toObject=function(){for(var r={},e=0;e<this.__property_names.length;e++)typeof this[this.__property_names[e]]<"u"&&(r[this.__property_names[e]]=this[this.__property_names[e]]);return r};Newgrounds.io.model.score.prototype.fromObject=function(r){for(var e,t=0;t<this.__property_names.length;t++)e=r[this.__property_names[t]],this.__property_names[t]=="user"&&e&&(e=new Newgrounds.io.model.user(this.__ngio,e)),this[this.__property_names[t]]=e};Newgrounds.io.model.score.prototype.constructor=Newgrounds.io.model.score;Newgrounds.io.model.scoreboard=function(r,e){var t,n;this.__property_names=["id","name"],this.__classname="Newgrounds.io.model.scoreboard",this.__ngio=r;var t;Object.defineProperty(this,"id",{get:function(){return typeof t>"u"?null:t},set:function(o){Newgrounds.io.model.checkStrictValue(this.__classname,"id",o,Number,null,null,null),t=o}});var n;Object.defineProperty(this,"name",{get:function(){return typeof n>"u"?null:n},set:function(o){Newgrounds.io.model.checkStrictValue(this.__classname,"name",o,String,null,null,null),n=o}}),e&&this.fromObject(e)};Newgrounds.io.model.scoreboard.prototype._has_ngio_user=function(){return this.__ngio&&this.__ngio.user};Newgrounds.io.model.scoreboard.prototype.toObject=function(){for(var r={},e=0;e<this.__property_names.length;e++)typeof this[this.__property_names[e]]<"u"&&(r[this.__property_names[e]]=this[this.__property_names[e]]);return r};Newgrounds.io.model.scoreboard.prototype.fromObject=function(r){for(var e,t=0;t<this.__property_names.length;t++)e=r[this.__property_names[t]],this[this.__property_names[t]]=e};Newgrounds.io.model.scoreboard.prototype.postScore=function(r,e,t){if(typeof e=="function"&&!t&&(t=e,e=null),e||(e=null),this._has_ngio_user())this.__ngio.callComponent("ScoreBoard.postScore",{id:this.id,value:r,tag:e},function(c){t(c)});else if(typeof t=="function"){var n=Newgrounds.io.model.error.get("This function requires a valid user session.",Newgrounds.io.model.error.LOGIN_REQUIRED),o={success:!1,error:n};t(o)}};Newgrounds.io.model.scoreboard.prototype.constructor=Newgrounds.io.model.scoreboard;Newgrounds.io.model.session=function(r,e){var t,n,o,c,l;this.__property_names=["expired","id","passport_url","remember","user"],this.__classname="Newgrounds.io.model.session",this.__ngio=r;var t;Object.defineProperty(this,"expired",{get:function(){return typeof t>"u"?null:t},set:function(d){Newgrounds.io.model.checkStrictValue(this.__classname,"expired",d,Boolean,null,null,null),t=d}});var n;Object.defineProperty(this,"id",{get:function(){return typeof n>"u"?null:n},set:function(d){Newgrounds.io.model.checkStrictValue(this.__classname,"id",d,String,null,null,null),n=d}});var o;Object.defineProperty(this,"passport_url",{get:function(){return typeof o>"u"?null:o},set:function(d){Newgrounds.io.model.checkStrictValue(this.__classname,"passport_url",d,String,null,null,null),o=d}});var c;Object.defineProperty(this,"remember",{get:function(){return typeof c>"u"?null:c},set:function(d){Newgrounds.io.model.checkStrictValue(this.__classname,"remember",d,Boolean,null,null,null),c=d}});var l;Object.defineProperty(this,"user",{get:function(){return typeof l>"u"?null:l},set:function(d){Newgrounds.io.model.checkStrictValue(this.__classname,"user",d,null,"user",null,null),l=d}}),e&&this.fromObject(e)};Newgrounds.io.model.session.prototype._has_ngio_user=function(){return this.__ngio&&this.__ngio.user};Newgrounds.io.model.session.prototype.toObject=function(){for(var r={},e=0;e<this.__property_names.length;e++)typeof this[this.__property_names[e]]<"u"&&(r[this.__property_names[e]]=this[this.__property_names[e]]);return r};Newgrounds.io.model.session.prototype.fromObject=function(r){for(var e,t=0;t<this.__property_names.length;t++)e=r[this.__property_names[t]],this.__property_names[t]=="user"&&e&&(e=new Newgrounds.io.model.user(this.__ngio,e)),this[this.__property_names[t]]=e};Newgrounds.io.model.session.prototype.constructor=Newgrounds.io.model.session;Newgrounds.io.model.user=function(r,e){var t,n,o,c;this.__property_names=["icons","id","name","supporter"],this.__classname="Newgrounds.io.model.user",this.__ngio=r;var t;Object.defineProperty(this,"icons",{get:function(){return typeof t>"u"?null:t},set:function(l){Newgrounds.io.model.checkStrictValue(this.__classname,"icons",l,null,"usericons",null,null),t=l}});var n;Object.defineProperty(this,"id",{get:function(){return typeof n>"u"?null:n},set:function(l){Newgrounds.io.model.checkStrictValue(this.__classname,"id",l,Number,null,null,null),n=l}});var o;Object.defineProperty(this,"name",{get:function(){return typeof o>"u"?null:o},set:function(l){Newgrounds.io.model.checkStrictValue(this.__classname,"name",l,String,null,null,null),o=l}});var c;Object.defineProperty(this,"supporter",{get:function(){return typeof c>"u"?null:c},set:function(l){Newgrounds.io.model.checkStrictValue(this.__classname,"supporter",l,Boolean,null,null,null),c=l}}),e&&this.fromObject(e)};Newgrounds.io.model.user.prototype._has_ngio_user=function(){return this.__ngio&&this.__ngio.user};Newgrounds.io.model.user.prototype.toObject=function(){for(var r={},e=0;e<this.__property_names.length;e++)typeof this[this.__property_names[e]]<"u"&&(r[this.__property_names[e]]=this[this.__property_names[e]]);return r};Newgrounds.io.model.user.prototype.fromObject=function(r){for(var e,t=0;t<this.__property_names.length;t++)e=r[this.__property_names[t]],this.__property_names[t]=="icons"&&e&&(e=new Newgrounds.io.model.usericons(this.__ngio,e)),this[this.__property_names[t]]=e};Newgrounds.io.model.user.prototype.constructor=Newgrounds.io.model.user;Newgrounds.io.model.usericons=function(r,e){var t,n,o;this.__property_names=["large","medium","small"],this.__classname="Newgrounds.io.model.usericons",this.__ngio=r;var t;Object.defineProperty(this,"large",{get:function(){return typeof t>"u"?null:t},set:function(c){Newgrounds.io.model.checkStrictValue(this.__classname,"large",c,String,null,null,null),t=c}});var n;Object.defineProperty(this,"medium",{get:function(){return typeof n>"u"?null:n},set:function(c){Newgrounds.io.model.checkStrictValue(this.__classname,"medium",c,String,null,null,null),n=c}});var o;Object.defineProperty(this,"small",{get:function(){return typeof o>"u"?null:o},set:function(c){Newgrounds.io.model.checkStrictValue(this.__classname,"small",c,String,null,null,null),o=c}}),e&&this.fromObject(e)};Newgrounds.io.model.usericons.prototype._has_ngio_user=function(){return this.__ngio&&this.__ngio.user};Newgrounds.io.model.usericons.prototype.toObject=function(){for(var r={},e=0;e<this.__property_names.length;e++)typeof this[this.__property_names[e]]<"u"&&(r[this.__property_names[e]]=this[this.__property_names[e]]);return r};Newgrounds.io.model.usericons.prototype.fromObject=function(r){for(var e,t=0;t<this.__property_names.length;t++)e=r[this.__property_names[t]],this[this.__property_names[t]]=e};Newgrounds.io.model.usericons.prototype.constructor=Newgrounds.io.model.usericons;Newgrounds.io.call_validators.getValidator=function(r){var e=r.split("."),t=e[0],n=e[1],o=Newgrounds.io.call_validators[t]&&Newgrounds.io.call_validators[t][n]?Newgrounds.io.call_validators[t][n]:null;return o};Newgrounds.io.call_validators.App={checkSession:{require_session:!0,secure:!1,redirect:!1,import:!1,params:{},returns:{session:{object:"session",description:null}}},endSession:{require_session:!0,secure:!1,redirect:!1,import:!1,params:{},returns:{}},getCurrentVersion:{require_session:!1,secure:!1,redirect:!1,import:!1,params:{version:{type:String,extract_from:null,required:null,description:'The version number (in "X.Y.Z" format) of the client-side app. (default = "0.0.0")'}},returns:{}},getHostLicense:{require_session:!1,secure:!1,redirect:!1,import:!1,params:{host:{type:String,extract_from:null,required:null,description:"The host domain to check (ei, somesite.com)."}},returns:{}},logView:{require_session:!1,secure:!1,redirect:!1,import:!1,params:{host:{type:String,extract_from:null,required:!0,description:'The domain hosting your app. Examples: "www.somesite.com", "localHost"'}},returns:{}},startSession:{require_session:!1,secure:!1,redirect:!1,import:!1,params:{force:{type:Boolean,extract_from:null,required:null,description:`If true, will create a new session even if the user already has an existing one.

Note: Any previous session ids will no longer be valid if this is used.`}},returns:{session:{object:"session",description:null}}}};Newgrounds.io.call_validators.CloudSave={clearSlot:{require_session:!0,secure:!1,redirect:!1,import:!1,params:{id:{type:Number,extract_from:null,required:!0,description:"The slot number."}},returns:{slot:{object:"saveslot",description:"A #saveslot object."}}},loadSlot:{require_session:!0,secure:!1,redirect:!1,import:!1,params:{id:{type:Number,extract_from:null,required:!0,description:"The slot number."}},returns:{slot:{object:"saveslot",description:"A #saveslot object."}}},loadSlots:{require_session:!0,secure:!1,redirect:!1,import:!1,params:{},returns:{slots:{array:{object:"saveslot"},description:"An array of #saveslot objects."}}},setData:{require_session:!0,secure:!1,redirect:!1,import:!1,params:{data:{type:String,extract_from:null,required:!0,description:"The data you want to save."},id:{type:Number,extract_from:null,required:!0,description:"The slot number."}},returns:{slot:{object:"saveslot",description:null}}}};Newgrounds.io.call_validators.Event={logEvent:{require_session:!1,secure:!1,redirect:!1,import:!1,params:{event_name:{type:String,extract_from:null,required:!0,description:"The name of your custom event as defined in your Referrals & Events settings."},host:{type:String,extract_from:null,required:!0,description:'The domain hosting your app. Example: "newgrounds.com", "localHost"'}},returns:{}}};Newgrounds.io.call_validators.Gateway={getDatetime:{require_session:!1,secure:!1,redirect:!1,import:!1,params:{},returns:{}},getVersion:{require_session:!1,secure:!1,redirect:!1,import:!1,params:{},returns:{}},ping:{require_session:!1,secure:!1,redirect:!1,import:!1,params:{},returns:{}}};Newgrounds.io.call_validators.Loader={loadAuthorUrl:{require_session:!1,secure:!1,redirect:!0,import:!1,params:{host:{type:String,extract_from:null,required:!0,description:'The domain hosting your app. Example: "www.somesite.com", "localHost"'},redirect:{type:Boolean,extract_from:null,required:!1,description:"Set this to false to get a JSON response containing the URL instead of doing an actual redirect."}},returns:{}},loadMoreGames:{require_session:!1,secure:!1,redirect:!0,import:!1,params:{host:{type:String,extract_from:null,required:!0,description:'The domain hosting your app. Example: "www.somesite.com", "localHost"'},redirect:{type:Boolean,extract_from:null,required:!1,description:"Set this to false to get a JSON response containing the URL instead of doing an actual redirect."}},returns:{}},loadNewgrounds:{require_session:!1,secure:!1,redirect:!0,import:!1,params:{host:{type:String,extract_from:null,required:!0,description:'The domain hosting your app. Example: "www.somesite.com", "localHost"'},redirect:{type:Boolean,extract_from:null,required:!1,description:"Set this to false to get a JSON response containing the URL instead of doing an actual redirect."}},returns:{}},loadOfficialUrl:{require_session:!1,secure:!1,redirect:!0,import:!1,params:{host:{type:String,extract_from:null,required:!0,description:'The domain hosting your app. Example: "www.somesite.com", "localHost"'},redirect:{type:Boolean,extract_from:null,required:!1,description:"Set this to false to get a JSON response containing the URL instead of doing an actual redirect."}},returns:{}},loadReferral:{require_session:!1,secure:!1,redirect:!0,import:!1,params:{host:{type:String,extract_from:null,required:!0,description:'The domain hosting your app. Example: "www.somesite.com", "localHost"'},redirect:{type:Boolean,extract_from:null,required:!1,description:"Set this to false to get a JSON response containing the URL instead of doing an actual redirect."},referral_name:{type:String,extract_from:null,required:!0,description:'The name of the referral (as defined in your "Referrals & Events" settings).'}},returns:{}}};Newgrounds.io.call_validators.Medal={getList:{require_session:!1,secure:!1,redirect:!1,import:!1,params:{},returns:{medals:{array:{object:"medal"},description:"An array of medal objects."}}},unlock:{require_session:!0,secure:!0,redirect:!1,import:!1,params:{id:{type:Number,extract_from:{object:"medal",alias:"medal",property:"id"},required:!0,description:"The numeric ID of the medal to unlock."}},returns:{medal:{object:"medal",description:"The #medal that was unlocked."}}}};Newgrounds.io.call_validators.ScoreBoard={getBoards:{require_session:!1,secure:!1,redirect:!1,import:!1,params:{},returns:{scoreboards:{array:{object:"scoreboard"},description:"An array of #scoreboard objects."}}},getScores:{require_session:!1,secure:!1,redirect:!1,import:!1,params:{id:{type:Number,extract_from:{object:"scoreboard",alias:"scoreboard",property:"id"},required:!0,description:"The numeric ID of the scoreboard."},limit:{type:Number,extract_from:null,required:null,description:"An integer indicating the number of scores to include in the list. Default = 10."},period:{type:String,extract_from:null,required:null,description:"The time-frame to pull scores from (see notes for acceptable values)."},skip:{type:Number,extract_from:null,required:null,description:"An integer indicating the number of scores to skip before starting the list. Default = 0."},social:{type:Boolean,extract_from:null,required:null,description:"If set to true, only social scores will be loaded (scores by the user and their friends). This param will be ignored if there is no valid session id and the 'user' param is absent."},tag:{type:String,extract_from:null,required:null,description:"A tag to filter results by."},user:{type:"mixed",extract_from:null,required:null,description:"A user's ID or name.  If 'social' is true, this user and their friends will be included. Otherwise, only scores for this user will be loaded. If this param is missing and there is a valid session id, that user will be used by default."}},returns:{scoreboard:{object:"scoreboard",description:"The #scoreboard being queried."},scores:{array:{object:"score"},description:"An array of #score objects."},user:{object:"user",description:"The #user the score list is associated with (either as defined in the 'user' param, or extracted from the current session when 'social' is set to true)"}}},postScore:{require_session:!0,secure:!0,redirect:!1,import:!1,params:{id:{type:Number,extract_from:{object:"scoreboard",alias:"scoreboard",property:"id"},required:!0,description:"The numeric ID of the scoreboard."},tag:{type:String,extract_from:null,required:null,description:"An optional tag that can be used to filter scores via ScoreBoard.getScores"},value:{type:Number,extract_from:null,required:!0,description:"The int value of the score."}},returns:{score:{object:"score",description:"The #score that was posted to the board."},scoreboard:{object:"scoreboard",description:"The #scoreboard that was posted to."}}}};Newgrounds.io.SessionLoader=function(r){if(!r||r.constructor!==Newgrounds.io.core)throw new Error("'ngio' must be a 'Newgrounds.io.core' instance.");this.__ngio=r;var e=null;Object.defineProperty(this,"session",{set:function(t){if(t&&!t.constructor===Newgrounds.io.model.session)throw new Error("'session' must be a 'Newgrounds.io.model.session' instance.");e=t},get:function(){return e}})};Newgrounds.io.SessionLoader.prototype={_event_listeners:{},last_error:null,passport_window:null,addEventListener:Newgrounds.io.events.EventDispatcher.prototype.addEventListener,removeEventListener:Newgrounds.io.events.EventDispatcher.prototype.removeEventListener,removeAllEventListeners:Newgrounds.io.events.EventDispatcher.prototype.removeAllEventListeners,dispatchEvent:Newgrounds.io.events.EventDispatcher.prototype.dispatchEvent,getValidSession:function(r,e){var t=this;t.checkSession(function(n){!n||n.expired?t.startSession(r,e):r.call(e,n)})},startSession:function(r,e){var t=new Newgrounds.io.events.SessionEvent,n=this;this.__ngio.callComponent("App.startSession",function(o){!o.success||!o.session?(o.error?n.last_error=o.error:(n.last_error=new Newgrounds.io.model.error,n.last_error.message="Unexpected Error"),t.type=Newgrounds.io.events.SessionEvent.SESSION_EXPIRED,n.session=null):(t.type=Newgrounds.io.events.SessionEvent.REQUEST_LOGIN,t.passport_url=o.session.passport_url,n.session=o.session),n.__ngio.session_id=n.session?n.session.id:null,n.dispatchEvent(t),r&&r.constructor===Function&&r.call(e,n.session)})},checkSession:function(r,e){var t=new Newgrounds.io.events.SessionEvent,n=this;n.session&&n.session.user?(t.type=Newgrounds.io.events.SessionEvent.USER_LOADED,t.user=n.session.user,n.dispatchEvent(t),r&&r.constructor===Function&&r.call(e,n.session)):this.__ngio.session_id?this.__ngio.callComponent("App.checkSession",function(o){!o.success||!o.session||o.session.expired?(t.type=Newgrounds.io.events.SessionEvent.SESSION_EXPIRED,n.session=null,o.error?n.last_error=o.error:(n.last_error=new Newgrounds.io.model.error,o.session&&o.session.expired?n.last_error.message="Session is Expired":n.last_error.message="Unexpected Error")):o.session.user?(t.type=Newgrounds.io.events.SessionEvent.USER_LOADED,t.user=o.session.user,n.session=o.session):(t.type=Newgrounds.io.events.SessionEvent.REQUEST_LOGIN,t.passport_url=o.session.passport_url,n.session=o.session),n.__ngio.session_id=n.session?n.session.id:null,n.dispatchEvent(t),r&&r.constructor===Function&&r.call(e,n.session)}):(t.type=Newgrounds.io.events.SessionEvent.SESSION_EXPIRED,n.session=null,n.dispatchEvent(t),r&&r.constructor===Function&&r.call(e,null))},endSession:function(r,e){var t=this,n=this.__ngio;this.__ngio.callComponent("App.endSession",function(o){t.session=null,n.session_id=null;var c=new Newgrounds.io.events.SessionEvent(Newgrounds.io.events.SessionEvent.SESSION_EXPIRED);t.dispatchEvent(c),r&&r.constructor===Function&&r.call(e,t.session)}),this.__ngio.session_id=null,this.session=null},loadPassport:function(r){return typeof r!="string"&&(r="_blank"),!this.session||!this.session.passport_url?(console.warn("Attempted to open Newgrounds Passport without a valid passport_url. Be sure you have called getValidSession() first!."),!1):(this.passport_window=window.open(this.session.passport_url,r),this.passport_window||console.warn("Unable to detect passport window. Pop-up blockers will prevent loading Newgrounds Passport if loadPassport() or requestLogin() are not called from within a mouse click handler."),this.passportOpen())},closePassport:function(){return this.passport_window?(this.passport_window.close(),this.passportOpen()):!1},passportOpen:function(){return!!(this.passport_window&&this.passport_window.parent)}};Newgrounds.io.SessionLoader.prototype.constructor=Newgrounds.io.SessionLoader;var I=I||function(r,e){var t={},n=t.lib={},o=function(){},c=n.Base={extend:function(s){o.prototype=this;var h=new o;return s&&h.mixIn(s),h.hasOwnProperty("init")||(h.init=function(){h.$super.init.apply(this,arguments)}),h.init.prototype=h,h.$super=this,h},create:function(){var s=this.extend();return s.init.apply(s,arguments),s},init:function(){},mixIn:function(s){for(var h in s)s.hasOwnProperty(h)&&(this[h]=s[h]);s.hasOwnProperty("toString")&&(this.toString=s.toString)},clone:function(){return this.init.prototype.extend(this)}},l=n.WordArray=c.extend({init:function(s,h){s=this.words=s||[],this.sigBytes=h!=e?h:4*s.length},toString:function(s){return(s||S).stringify(this)},concat:function(s){var h=this.words,u=s.words,a=this.sigBytes;if(s=s.sigBytes,this.clamp(),a%4)for(var _=0;_<s;_++)h[a+_>>>2]|=(u[_>>>2]>>>24-8*(_%4)&255)<<24-8*((a+_)%4);else if(65535<u.length)for(_=0;_<s;_+=4)h[a+_>>>2]=u[_>>>2];else h.push.apply(h,u);return this.sigBytes+=s,this},clamp:function(){var s=this.words,h=this.sigBytes;s[h>>>2]&=4294967295<<32-8*(h%4),s.length=r.ceil(h/4)},clone:function(){var s=c.clone.call(this);return s.words=this.words.slice(0),s},random:function(s){for(var h=[],u=0;u<s;u+=4)h.push(4294967296*r.random()|0);return new l.init(h,s)}}),d=t.enc={},S=d.Hex={stringify:function(s){var h=s.words;s=s.sigBytes;for(var u=[],a=0;a<s;a++){var _=h[a>>>2]>>>24-8*(a%4)&255;u.push((_>>>4).toString(16)),u.push((_&15).toString(16))}return u.join("")},parse:function(s){for(var h=s.length,u=[],a=0;a<h;a+=2)u[a>>>3]|=parseInt(s.substr(a,2),16)<<24-4*(a%8);return new l.init(u,h/2)}},p=d.Latin1={stringify:function(s){var h=s.words;s=s.sigBytes;for(var u=[],a=0;a<s;a++)u.push(String.fromCharCode(h[a>>>2]>>>24-8*(a%4)&255));return u.join("")},parse:function(s){for(var h=s.length,u=[],a=0;a<h;a++)u[a>>>2]|=(s.charCodeAt(a)&255)<<24-8*(a%4);return new l.init(u,h)}},w=d.Utf8={stringify:function(s){try{return decodeURIComponent(escape(p.stringify(s)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(s){return p.parse(unescape(encodeURIComponent(s)))}},v=n.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(s){typeof s=="string"&&(s=w.parse(s)),this._data.concat(s),this._nDataBytes+=s.sigBytes},_process:function(s){var h=this._data,u=h.words,a=h.sigBytes,_=this.blockSize,E=a/(4*_),E=s?r.ceil(E):r.max((E|0)-this._minBufferSize,0);if(s=E*_,a=r.min(4*s,a),s){for(var x=0;x<s;x+=_)this._doProcessBlock(u,x);x=u.splice(0,s),h.sigBytes-=a}return new l.init(x,a)},clone:function(){var s=c.clone.call(this);return s._data=this._data.clone(),s},_minBufferSize:0});n.Hasher=v.extend({cfg:c.extend(),init:function(s){this.cfg=this.cfg.extend(s),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(s){return this._append(s),this._process(),this},finalize:function(s){return s&&this._append(s),this._doFinalize()},blockSize:16,_createHelper:function(s){return function(h,u){return new s.init(u).finalize(h)}},_createHmacHelper:function(s){return function(h,u){return new N.HMAC.init(s,u).finalize(h)}}});var N=t.algo={};return t}(Math);(function(){var r=I,e=r.lib.WordArray;r.enc.Base64={stringify:function(t){var n=t.words,o=t.sigBytes,c=this._map;t.clamp(),t=[];for(var l=0;l<o;l+=3)for(var d=(n[l>>>2]>>>24-8*(l%4)&255)<<16|(n[l+1>>>2]>>>24-8*((l+1)%4)&255)<<8|n[l+2>>>2]>>>24-8*((l+2)%4)&255,S=0;4>S&&l+.75*S<o;S++)t.push(c.charAt(d>>>6*(3-S)&63));if(n=c.charAt(64))for(;t.length%4;)t.push(n);return t.join("")},parse:function(t){var n=t.length,o=this._map,c=o.charAt(64);c&&(c=t.indexOf(c),c!=-1&&(n=c));for(var c=[],l=0,d=0;d<n;d++)if(d%4){var S=o.indexOf(t.charAt(d-1))<<2*(d%4),p=o.indexOf(t.charAt(d))>>>6-2*(d%4);c[l>>>2]|=(S|p)<<24-8*(l%4),l++}return e.create(c,l)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(r){function e(v,N,s,h,u,a,_){return v=v+(N&s|~N&h)+u+_,(v<<a|v>>>32-a)+N}function t(v,N,s,h,u,a,_){return v=v+(N&h|s&~h)+u+_,(v<<a|v>>>32-a)+N}function n(v,N,s,h,u,a,_){return v=v+(N^s^h)+u+_,(v<<a|v>>>32-a)+N}function o(v,N,s,h,u,a,_){return v=v+(s^(N|~h))+u+_,(v<<a|v>>>32-a)+N}for(var c=I,S=c.lib,l=S.WordArray,d=S.Hasher,S=c.algo,p=[],w=0;64>w;w++)p[w]=4294967296*r.abs(r.sin(w+1))|0;S=S.MD5=d.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(v,N){for(var s=0;16>s;s++){var h=N+s,u=v[h];v[h]=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360}var s=this._hash.words,h=v[N+0],u=v[N+1],a=v[N+2],_=v[N+3],E=v[N+4],x=v[N+5],D=v[N+6],T=v[N+7],q=v[N+8],P=v[N+9],O=v[N+10],A=v[N+11],B=v[N+12],j=v[N+13],b=v[N+14],L=v[N+15],f=s[0],g=s[1],m=s[2],y=s[3],f=e(f,g,m,y,h,7,p[0]),y=e(y,f,g,m,u,12,p[1]),m=e(m,y,f,g,a,17,p[2]),g=e(g,m,y,f,_,22,p[3]),f=e(f,g,m,y,E,7,p[4]),y=e(y,f,g,m,x,12,p[5]),m=e(m,y,f,g,D,17,p[6]),g=e(g,m,y,f,T,22,p[7]),f=e(f,g,m,y,q,7,p[8]),y=e(y,f,g,m,P,12,p[9]),m=e(m,y,f,g,O,17,p[10]),g=e(g,m,y,f,A,22,p[11]),f=e(f,g,m,y,B,7,p[12]),y=e(y,f,g,m,j,12,p[13]),m=e(m,y,f,g,b,17,p[14]),g=e(g,m,y,f,L,22,p[15]),f=t(f,g,m,y,u,5,p[16]),y=t(y,f,g,m,D,9,p[17]),m=t(m,y,f,g,A,14,p[18]),g=t(g,m,y,f,h,20,p[19]),f=t(f,g,m,y,x,5,p[20]),y=t(y,f,g,m,O,9,p[21]),m=t(m,y,f,g,L,14,p[22]),g=t(g,m,y,f,E,20,p[23]),f=t(f,g,m,y,P,5,p[24]),y=t(y,f,g,m,b,9,p[25]),m=t(m,y,f,g,_,14,p[26]),g=t(g,m,y,f,q,20,p[27]),f=t(f,g,m,y,j,5,p[28]),y=t(y,f,g,m,a,9,p[29]),m=t(m,y,f,g,T,14,p[30]),g=t(g,m,y,f,B,20,p[31]),f=n(f,g,m,y,x,4,p[32]),y=n(y,f,g,m,q,11,p[33]),m=n(m,y,f,g,A,16,p[34]),g=n(g,m,y,f,b,23,p[35]),f=n(f,g,m,y,u,4,p[36]),y=n(y,f,g,m,E,11,p[37]),m=n(m,y,f,g,T,16,p[38]),g=n(g,m,y,f,O,23,p[39]),f=n(f,g,m,y,j,4,p[40]),y=n(y,f,g,m,h,11,p[41]),m=n(m,y,f,g,_,16,p[42]),g=n(g,m,y,f,D,23,p[43]),f=n(f,g,m,y,P,4,p[44]),y=n(y,f,g,m,B,11,p[45]),m=n(m,y,f,g,L,16,p[46]),g=n(g,m,y,f,a,23,p[47]),f=o(f,g,m,y,h,6,p[48]),y=o(y,f,g,m,T,10,p[49]),m=o(m,y,f,g,b,15,p[50]),g=o(g,m,y,f,x,21,p[51]),f=o(f,g,m,y,B,6,p[52]),y=o(y,f,g,m,_,10,p[53]),m=o(m,y,f,g,O,15,p[54]),g=o(g,m,y,f,u,21,p[55]),f=o(f,g,m,y,q,6,p[56]),y=o(y,f,g,m,L,10,p[57]),m=o(m,y,f,g,D,15,p[58]),g=o(g,m,y,f,j,21,p[59]),f=o(f,g,m,y,E,6,p[60]),y=o(y,f,g,m,A,10,p[61]),m=o(m,y,f,g,a,15,p[62]),g=o(g,m,y,f,P,21,p[63]);s[0]=s[0]+f|0,s[1]=s[1]+g|0,s[2]=s[2]+m|0,s[3]=s[3]+y|0},_doFinalize:function(){var v=this._data,N=v.words,s=8*this._nDataBytes,h=8*v.sigBytes;N[h>>>5]|=128<<24-h%32;var u=r.floor(s/4294967296);for(N[(h+64>>>9<<4)+15]=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360,N[(h+64>>>9<<4)+14]=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360,v.sigBytes=4*(N.length+1),this._process(),v=this._hash,N=v.words,s=0;4>s;s++)h=N[s],N[s]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360;return v},clone:function(){var v=d.clone.call(this);return v._hash=this._hash.clone(),v}}),c.MD5=d._createHelper(S),c.HmacMD5=d._createHmacHelper(S)})(Math);(function(){var r=I,n=r.lib,e=n.Base,t=n.WordArray,n=r.algo,o=n.EvpKDF=e.extend({cfg:e.extend({keySize:4,hasher:n.MD5,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,l){for(var v=this.cfg,d=v.hasher.create(),S=t.create(),p=S.words,w=v.keySize,v=v.iterations;p.length<w;){N&&d.update(N);var N=d.update(c).finalize(l);d.reset();for(var s=1;s<v;s++)N=d.finalize(N),d.reset();S.concat(N)}return S.sigBytes=4*w,S}});r.EvpKDF=function(c,l,d){return o.create(d).compute(c,l)}})();I.lib.Cipher||function(r){var s=I,e=s.lib,t=e.Base,n=e.WordArray,o=e.BufferedBlockAlgorithm,c=s.enc.Base64,l=s.algo.EvpKDF,d=e.Cipher=o.extend({cfg:t.extend(),createEncryptor:function(u,a){return this.create(this._ENC_XFORM_MODE,u,a)},createDecryptor:function(u,a){return this.create(this._DEC_XFORM_MODE,u,a)},init:function(u,a,_){this.cfg=this.cfg.extend(_),this._xformMode=u,this._key=a,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(u){return this._append(u),this._process()},finalize:function(u){return u&&this._append(u),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(u){return{encrypt:function(a,_,E){return(typeof _=="string"?h:N).encrypt(u,a,_,E)},decrypt:function(a,_,E){return(typeof _=="string"?h:N).decrypt(u,a,_,E)}}}});e.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var v=s.mode={},S=function(u,a,_){var E=this._iv;E?this._iv=r:E=this._prevBlock;for(var x=0;x<_;x++)u[a+x]^=E[x]},p=(e.BlockCipherMode=t.extend({createEncryptor:function(u,a){return this.Encryptor.create(u,a)},createDecryptor:function(u,a){return this.Decryptor.create(u,a)},init:function(u,a){this._cipher=u,this._iv=a}})).extend();p.Encryptor=p.extend({processBlock:function(u,a){var _=this._cipher,E=_.blockSize;S.call(this,u,a,E),_.encryptBlock(u,a),this._prevBlock=u.slice(a,a+E)}}),p.Decryptor=p.extend({processBlock:function(u,a){var _=this._cipher,E=_.blockSize,x=u.slice(a,a+E);_.decryptBlock(u,a),S.call(this,u,a,E),this._prevBlock=x}}),v=v.CBC=p,p=(s.pad={}).Pkcs7={pad:function(u,a){for(var _=4*a,_=_-u.sigBytes%_,E=_<<24|_<<16|_<<8|_,x=[],D=0;D<_;D+=4)x.push(E);_=n.create(x,_),u.concat(_)},unpad:function(u){u.sigBytes-=u.words[u.sigBytes-1>>>2]&255}},e.BlockCipher=d.extend({cfg:d.cfg.extend({mode:v,padding:p}),reset:function(){d.reset.call(this);var a=this.cfg,u=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var _=a.createEncryptor;else _=a.createDecryptor,this._minBufferSize=1;this._mode=_.call(a,this,u&&u.words)},_doProcessBlock:function(u,a){this._mode.processBlock(u,a)},_doFinalize:function(){var u=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){u.pad(this._data,this.blockSize);var a=this._process(!0)}else a=this._process(!0),u.unpad(a);return a},blockSize:4});var w=e.CipherParams=t.extend({init:function(u){this.mixIn(u)},toString:function(u){return(u||this.formatter).stringify(this)}}),v=(s.format={}).OpenSSL={stringify:function(u){var a=u.ciphertext;return u=u.salt,(u?n.create([1398893684,1701076831]).concat(u).concat(a):a).toString(c)},parse:function(u){u=c.parse(u);var a=u.words;if(a[0]==1398893684&&a[1]==1701076831){var _=n.create(a.slice(2,4));a.splice(0,4),u.sigBytes-=16}return w.create({ciphertext:u,salt:_})}},N=e.SerializableCipher=t.extend({cfg:t.extend({format:v}),encrypt:function(u,a,_,E){E=this.cfg.extend(E);var x=u.createEncryptor(_,E);return a=x.finalize(a),x=x.cfg,w.create({ciphertext:a,key:_,iv:x.iv,algorithm:u,mode:x.mode,padding:x.padding,blockSize:u.blockSize,formatter:E.format})},decrypt:function(u,a,_,E){return E=this.cfg.extend(E),a=this._parse(a,E.format),u.createDecryptor(_,E).finalize(a.ciphertext)},_parse:function(u,a){return typeof u=="string"?a.parse(u,this):u}}),s=(s.kdf={}).OpenSSL={execute:function(u,a,_,E){return E||(E=n.random(8)),u=l.create({keySize:a+_}).compute(u,E),_=n.create(u.words.slice(a),4*_),u.sigBytes=4*a,w.create({key:u,iv:_,salt:E})}},h=e.PasswordBasedCipher=N.extend({cfg:N.cfg.extend({kdf:s}),encrypt:function(u,a,_,E){return E=this.cfg.extend(E),_=E.kdf.execute(_,u.keySize,u.ivSize),E.iv=_.iv,u=N.encrypt.call(this,u,a,_.key,E),u.mixIn(_),u},decrypt:function(u,a,_,E){return E=this.cfg.extend(E),a=this._parse(a,E.format),_=E.kdf.execute(_,u.keySize,u.ivSize,a.salt),E.iv=_.iv,N.decrypt.call(this,u,a,_.key,E)}})}();(function(){for(var r=I,e=r.lib.BlockCipher,q=r.algo,t=[],n=[],o=[],c=[],l=[],d=[],S=[],p=[],w=[],v=[],N=[],s=0;256>s;s++)N[s]=128>s?s<<1:s<<1^283;for(var h=0,u=0,s=0;256>s;s++){var a=u^u<<1^u<<2^u<<3^u<<4,a=a>>>8^a&255^99;t[h]=a,n[a]=h;var _=N[h],E=N[_],x=N[E],D=257*N[a]^16843008*a;o[h]=D<<24|D>>>8,c[h]=D<<16|D>>>16,l[h]=D<<8|D>>>24,d[h]=D,D=16843009*x^65537*E^257*_^16843008*h,S[a]=D<<24|D>>>8,p[a]=D<<16|D>>>16,w[a]=D<<8|D>>>24,v[a]=D,h?(h=_^N[N[N[x^_]]],u^=N[N[u]]):h=u=1}var T=[0,1,2,4,8,16,32,64,128,27,54],q=q.AES=e.extend({_doReset:function(){for(var A=this._key,P=A.words,O=A.sigBytes/4,A=4*((this._nRounds=O+6)+1),B=this._keySchedule=[],j=0;j<A;j++)if(j<O)B[j]=P[j];else{var b=B[j-1];j%O?6<O&&j%O==4&&(b=t[b>>>24]<<24|t[b>>>16&255]<<16|t[b>>>8&255]<<8|t[b&255]):(b=b<<8|b>>>24,b=t[b>>>24]<<24|t[b>>>16&255]<<16|t[b>>>8&255]<<8|t[b&255],b^=T[j/O|0]<<24),B[j]=B[j-O]^b}for(P=this._invKeySchedule=[],O=0;O<A;O++)j=A-O,b=O%4?B[j]:B[j-4],P[O]=4>O||4>=j?b:S[t[b>>>24]]^p[t[b>>>16&255]]^w[t[b>>>8&255]]^v[t[b&255]]},encryptBlock:function(P,O){this._doCryptBlock(P,O,this._keySchedule,o,c,l,d,t)},decryptBlock:function(P,O){var A=P[O+1];P[O+1]=P[O+3],P[O+3]=A,this._doCryptBlock(P,O,this._invKeySchedule,S,p,w,v,n),A=P[O+1],P[O+1]=P[O+3],P[O+3]=A},_doCryptBlock:function(P,O,A,B,j,b,L,f){for(var y=this._nRounds,R=P[O]^A[0],C=P[O+1]^A[1],k=P[O+2]^A[2],V=P[O+3]^A[3],m=4,g=1;g<y;g++)var M=B[R>>>24]^j[C>>>16&255]^b[k>>>8&255]^L[V&255]^A[m++],z=B[C>>>24]^j[k>>>16&255]^b[V>>>8&255]^L[R&255]^A[m++],U=B[k>>>24]^j[V>>>16&255]^b[R>>>8&255]^L[C&255]^A[m++],V=B[V>>>24]^j[R>>>16&255]^b[C>>>8&255]^L[k&255]^A[m++],R=M,C=z,k=U;M=(f[R>>>24]<<24|f[C>>>16&255]<<16|f[k>>>8&255]<<8|f[V&255])^A[m++],z=(f[C>>>24]<<24|f[k>>>16&255]<<16|f[V>>>8&255]<<8|f[R&255])^A[m++],U=(f[k>>>24]<<24|f[V>>>16&255]<<16|f[R>>>8&255]<<8|f[C&255])^A[m++],V=(f[V>>>24]<<24|f[R>>>16&255]<<16|f[C>>>8&255]<<8|f[k&255])^A[m++],P[O]=M,P[O+1]=z,P[O+2]=U,P[O+3]=V},keySize:8});r.AES=e._createHelper(q)})();
//# sourceMappingURL=tph_newgroundsio-Bkcb1UKq.js.map
